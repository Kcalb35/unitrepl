## Rust 命令行 REPL 单位换算器（V1 需求与交互规范）

### 1. 目标

提供一个命令行 **REPL** 形式的单位换算器，用户通过输入一行指令完成单位换算并输出结果；同时支持非交互式的一次性转换调用。

---

### 2. 程序入口（CLI）

* **无参数**：进入交互式 REPL

  * 用法：`unitrepl`
* **带一个参数**：将该参数视为一条完整的换算指令，直接执行并输出结果后退出

  * 用法：`unitrepl "<expr>"`
  * 示例：`unitrepl "10 km to m"`
* V1 **不提供任何 flags/选项参数**。

---

### 3. REPL 交互与输入分类

* REPL 每次读取一行输入并执行。
* 输入分两类处理：

1. **内置命令（完全匹配）**

* `help`：展示支持的命令以及输入样例
* `list`：展示所有支持的**基本单位符号**（按量纲分组：长度、时间）
* `exit`：退出 REPL

2. **换算指令**

* 非内置命令的其他输入，按换算指令语法解析并执行。
* 解析或换算失败时输出错误信息，并继续下一次输入（REPL 不退出）。

---

### 4. 换算指令语法（CLI 与 REPL 共用）

指令格式固定为：

`<number> <from_unit> to <to_unit>`

* 语义：

  * 第 1 个字段：数字
  * 第 2 个字段：原单位（from_unit）
  * `to`：转换关键词
  * 最后 1 个字段：目标单位（to_unit）
* 示例：

  * `10 km to m`

---

### 5. 支持的单位范围（V1）

* 仅支持两类基本量纲：

  * **长度**
  * **时间**
* 其他量纲（质量、温度、面积等）V1 不做。
* `list` 输出的是已支持的**基本单位符号**；复合单位由用户按规则组合输入。

---

### 6. 数字支持范围

* 支持十进制小数：如 `0.5`
* 支持科学计数法：如 `1e3`、`2.5E-2`

---

### 7. 单位表达式规则

* 支持**复合单位**：必须显式使用 `*` 或 `/`

  * 例如：`m/s`、`km*h`（仅示例）
* 支持单位的**整数指数**（可为负），使用 `^`

  * 例如：`cm^-1`、`s^2`
* 指数仅允许 **整数**（不支持小数指数）。
* **不支持隐式乘法/空格乘法**：

  * 复合单位之间必须用 `*` 或 `/`
  * 不允许通过空格表示乘法

---

### 8. 输出要求（V1）

* 输出以“简单直观”为主：

  * 打印换算后的数值与目标单位
* 暂不要求复杂格式化：

  * 自动选择最佳单位、对齐、美化输出
  * 单位化简展示（如将 `m*s/s` 化简为 `m`）

---

### 9. 明确不做（V1）

* 除长度/时间以外的量纲
* 隐式乘法或通过空格表示复合单位
* 非整数指数
* 复杂输出格式（智能单位选择、格式模板、单位化简解释等）
* CLI flags/选项参数（V1 不提供）
